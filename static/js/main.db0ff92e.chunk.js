(this["webpackJsonpcorona-app"]=this["webpackJsonpcorona-app"]||[]).push([[0],{113:function(e,t,a){e.exports=a(186)},118:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n,r,i=a(0),o=a.n(i),c=a(25),l=a.n(c),u=(a(118),a(8)),d=a(12),s=a(62),m=a(15),f=a(13),b=a(44),v=(a(124),a(1));!function(e){e.Active="active",e.Comfirmed="confirmed",e.Deaths="deaths",e.Recovered="recovered"}(n||(n={}));var h=(r={},Object(v.a)(r,n.Comfirmed,"#FF5733"),Object(v.a)(r,n.Recovered,"#7ECB88"),Object(v.a)(r,n.Deaths,"#BD33FF"),Object(v.a)(r,n.Active,"#FFBD33"),r);function p(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e6,t=[0,1,5,10,50,100,500,1e3,2e3],a=5e3;a<=e;)t.push(a),a+=a<1e5?5e3:a<2e5?1e4:2e4;return t.reduce((function(e,t,a){return[].concat(Object(s.a)(e),[t,a+4])}),[])}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return[e,t,["get",a,["get","timeline"]]]}var O,j=a(26),C=Object(j.c)({name:"map",initialState:{viewport:{longitude:0,latitude:15,zoom:1.5}},reducers:{setViewport:function(e,t){e.viewport=t.payload}}}),g=function(e){return e.map.viewport},D=C.actions.setViewport,E=C.reducer,w=a(22),S=a.n(w),_=a(23),B=a(16),R={filterBy:n.Comfirmed,sortBy:n.Comfirmed,sortDirection:B.c.DESC,timelineDate:S()().format(),isTableVisibleOnMobile:!1},k=Object(j.c)({name:"sideBar",initialState:R,reducers:{setFilterType:function(e,t){e.filterBy=t.payload},setTimelineDate:function(e,t){e.timelineDate=t.payload},sort:function(e,t){e.sortBy=t.payload.sortBy,e.sortDirection=t.payload.sortDirection},toggleTableVisibility:function(e){e.isTableVisibleOnMobile=!e.isTableVisibleOnMobile}}}),A=function(e){return e.sideBar.sortBy},x=function(e){return e.sideBar.sortDirection},T=function(e){return e.sideBar.filterBy},M=function(e){return e.sideBar.isTableVisibleOnMobile},Y=Object(_.a)([function(e){return e.sideBar.timelineDate}],(function(e){return S()(e)})),N=k.actions,L=N.setFilterType,F=N.setTimelineDate,K=N.sort,G=N.toggleTableVisibility,I=k.reducer,V=a(34),P=a.n(V),H=a(51),X=a(112),q=a.n(X),z=(O={},Object(v.a)(O,n.Active,{}),Object(v.a)(O,n.Comfirmed,{}),Object(v.a)(O,n.Deaths,{}),Object(v.a)(O,n.Recovered,{}),O);function J(){return Q.apply(this,arguments)}function Q(){return(Q=Object(H.a)(P.a.mark((function e(){var t,a,r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["https://corona.lmao.ninja/countries","https://corona.lmao.ninja/v2/historical?lastdays=all"],e.next=3,Promise.all(t.map(function(){var e=Object(H.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return a=e.sent,r=W(a[0]),i=Z(a[1],r),e.abrupt("return",Object.values(r).reduce((function(e,t){var a,r=i[t.country],o=r?r.timeline:z;return Object.keys(o[n.Comfirmed]).length||console.warn("countries without timeline",t),Object(m.a)({},e,Object(v.a)({},t.country,Object(m.a)({},t,{timeline:U((a={},Object(v.a)(a,n.Active,Object(m.a)({},o[n.Active],{},t.timeline[n.Active])),Object(v.a)(a,n.Comfirmed,Object(m.a)({},o[n.Comfirmed],{},t.timeline[n.Comfirmed])),Object(v.a)(a,n.Deaths,Object(m.a)({},o[n.Deaths],{},t.timeline[n.Deaths])),Object(v.a)(a,n.Recovered,Object(m.a)({},o[n.Recovered],{},t.timeline[n.Recovered])),a))})))}),{}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){var t=S.a.utc().format("M/D/YY");return e.reduce((function(e,a){var r,i,o={country:a.country,province:null,coordinates:{latitude:a.countryInfo.lat,longitude:a.countryInfo.long},timeline:(r={},Object(v.a)(r,n.Active,Object(v.a)({},t,a.cases-a.deaths-a.recovered)),Object(v.a)(r,n.Comfirmed,Object(v.a)({},t,a.cases)),Object(v.a)(r,n.Deaths,Object(v.a)({},t,a.deaths)),Object(v.a)(r,n.Recovered,Object(v.a)({},t,a.recovered)),r),updated:a.updated};return Object(m.a)({},e,Object(v.a)({},($[i=o.country]||i).toLowerCase(),o))}),{})}function Z(e,t){return e.reduce((function(e,a){var r,i,o,c,l,u={country:(null===(r=t[a.country])||void 0===r?void 0:r.country)||ee(a.country),province:(null===(i=t[a.province])||void 0===i?void 0:i.country)||ee(a.province),coordinates:{latitude:0,longitude:0},timeline:(o={},Object(v.a)(o,n.Active,Object.keys(a.timeline.cases).reduce((function(e,t){var n=a.timeline.cases[t]-a.timeline.deaths[t]-a.timeline.recovered[t];return e[t]=n,e}),{})),Object(v.a)(o,n.Comfirmed,a.timeline.cases),Object(v.a)(o,n.Deaths,a.timeline.deaths),Object(v.a)(o,n.Recovered,a.timeline.recovered),o)},d=["Australia","China","Canada"].includes(u.country);return e[u.country]||u.province&&!d||(e[u.country]=Object(m.a)({},u,{province:null,timeline:u.province?z:u.timeline})),u.province&&(e[u.province]=u),e[u.country]&&u.province&&d&&(e[u.country].timeline=(c=e[u.country].timeline,l=u.timeline,Object.keys(c).reduce((function(e,t){var a=Object.keys(c[t]),n=Object.keys(l[t]),r=a.length?a:n;return Object(m.a)({},e,Object(v.a)({},t,r.reduce((function(e,a){return Object(m.a)({},e,Object(v.a)({},a,(c[t][a]||0)+(l[t][a]||0)))}),{})))}),z))),e}),{})}function U(e){return Object.keys(e).reduce((function(t,a){return Object(m.a)({},t,Object(v.a)({},a,Object.keys(e[a]).reduce((function(t,n){return e[a][n]&&(t[n]=e[a][n]),t}),{})))}),z)}var $={"C\xf4te d'Ivoire":"Cote d'Ivoire",Palestine:"West Bank and Gaza","Lao People's Democratic Republic":'Lao People"s Democratic Republic',Myanmar:"Burma","Holy See (Vatican City State)":"Holy See","R\xe9union":"Reunion",Macao:"macau","Saint Martin":"st martin","St. Barth":"saint barthelemy","Saint Pierre Miquelon":"saint pierre and miquelon","Cura\xe7ao":"curacao","Caribbean Netherlands":"bonaire, sint eustatius and saba"};function ee(e){return Object.keys($).reduce((function(e,t){return Object(m.a)({},e,Object(v.a)({},$[t],t))}),{})[e]||e}var te,ae=Object(j.b)("countries/fetchCountries",Object(H.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),ne=Object(j.c)({name:"countries",initialState:{loading:"idle",countriesByName:{},error:null},reducers:{},extraReducers:function(e){e.addCase(ae.pending,(function(e){"idle"===e.loading&&(e.loading="pending")})).addCase(ae.fulfilled,(function(e,t){"pending"===e.loading&&(e.loading="idle"),e.countriesByName=t.payload})).addCase(ae.rejected,(function(e,t){e.error=t.error}))}}),re=function(e){return e.countries.countriesByName},ie=Object(_.a)([re],(function(e){return Object.values(e)})),oe=Object(_.a)([ie,Y],(function(e,t){var a=t.format("M/D/YY");return e.filter((function(e){return e.timeline.active[a]||e.timeline.confirmed[a]||e.timeline.deaths[a]||e.timeline.recovered[a]}))})),ce=Object(_.a)([oe,Y,A,x],(function(e,t,a,r){var i=t.format("M/D/YY"),o=Object.values(n).includes(a);return q.a.orderBy(e,(function(e){return o?e.timeline[a][i]||0:e[a]}),r===B.c.ASC?"asc":"desc").map((function(e,t){return Object(m.a)({},e,{index:t+1})}))})),le=Object(_.a)([oe,Y],(function(e,t){var a=t.format("M/D/YY");return e.reduce((function(e,t){return{active:e.active+(t.timeline.active[a]||0),confirmed:e.confirmed+(t.timeline.confirmed[a]||0),deaths:e.deaths+(t.timeline.deaths[a]||0),recovered:e.recovered+(t.timeline.recovered[a]||0)}}),{active:0,confirmed:0,deaths:0,recovered:0})})),ue=Object(_.a)([oe],(function(e){return{type:"FeatureCollection",features:e.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.coordinates.longitude,e.coordinates.latitude]},properties:e}}))}})),de=ne.reducer,se=a(84),me=a.n(se);!function(e){e.Light="light",e.Dark="dark"}(te||(te={}));var fe=o.a.createContext({theme:te.Dark,switchTheme:function(e){}});var be=Object(i.memo)((function(){var e,t,a,r,c=Object(i.useRef)(null),l=Object(i.useContext)(fe).theme,d=Object(f.c)(g),v=Object(i.useState)(d),O=Object(u.a)(v,2),j=O[0],C=O[1],D=Object(i.useState)({country:null,offsetX:0,offsetY:0}),E=Object(u.a)(D,2),w=E[0],S=E[1],_=Object(f.c)(re),B=Object(f.c)(ue),R=Object(f.c)(T),k=Object(f.c)(Y).format("M/D/YY"),A=y("has",k,R),x=y("get",k,R),M=Object(i.useCallback)((function(e){var t=e.features,a=void 0===t?[]:t,n=e.srcEvent,r=n.offsetX,i=n.offsetY,o=a.find((function(e){return["label","point"].includes(e.layer.id)}));if(o&&o.properties&&o.properties.country){if(w.country!==o.properties.country)return S({offsetX:r,offsetY:i,country:_[o.properties.country]})}else if(w.country)return S({offsetX:0,offsetY:0,country:null})}),[_,w]);return Object(i.useEffect)((function(){C(Object(m.a)({},d,{transitionInterpolator:new b.a({speed:1.2}),transitionDuration:"auto"}))}),[d]),o.a.createElement("div",{className:me.a.mapContainer},o.a.createElement(b.d,Object.assign({ref:c},j,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/".concat(l,"-v10"),mapboxApiAccessToken:"pk.eyJ1IjoiZGVtcGtoIiwiYSI6ImNrOGZwanFuazAxdnozbG4yNm1tOHVuYzkifQ.fRJrCsndLJ4yM-jlPaAG9Q",onViewportChange:function(e){return C(e)},onHover:M}),o.a.createElement(b.c,{id:"data",type:"geojson",data:B},o.a.createElement(b.b,{id:"point",type:"circle",filter:["all",A,[">",x,0]],paint:{"circle-radius":["interpolate",["linear"],x].concat(Object(s.a)(p())),"circle-color":h[R],"circle-opacity":.4,"circle-stroke-width":1,"circle-stroke-color":h[R]}}),o.a.createElement(b.b,{id:"label",type:"symbol",filter:["all",A,[">",x,0]],paint:{"text-color":l===te.Light?"#3B3B3B":"#EBEBEB"},layout:{"text-field":x,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}})),w.country?o.a.createElement("div",{className:me.a.tooltip,style:{top:w.offsetY,left:w.offsetX}},o.a.createElement("b",null,w.country.country),o.a.createElement("div",null,o.a.createElement("span",null,"Confirmed:"),o.a.createElement("span",{style:{color:h[n.Comfirmed]}},(null===(e=w.country.timeline[n.Comfirmed][k])||void 0===e?void 0:e.toLocaleString())||0)),o.a.createElement("div",null,o.a.createElement("span",null,"Deaths:"),o.a.createElement("span",{style:{color:h[n.Deaths]}},(null===(t=w.country.timeline[n.Deaths][k])||void 0===t?void 0:t.toLocaleString())||0)),o.a.createElement("div",null,o.a.createElement("span",null,"Recovered:"),o.a.createElement("span",{style:{color:h[n.Recovered]}},(null===(a=w.country.timeline[n.Recovered][k])||void 0===a?void 0:a.toLocaleString())||0)),o.a.createElement("div",null,o.a.createElement("span",null,"Active:"),o.a.createElement("span",{style:{color:h[n.Active]}},(null===(r=w.country.timeline[n.Active][k])||void 0===r?void 0:r.toLocaleString())||0))):null))})),ve=a(31),he=a.n(ve);function pe(e){var t=e.label,a=e.quantity,n=e.activeColor,r=e.isActive,i=e.onClick;return o.a.createElement("div",{className:Object(d.a)(he.a.headerStat,r&&he.a.headerStatActive),style:r?{color:n}:{},onClick:i},o.a.createElement("div",{className:he.a.headerStatLabel},t),o.a.createElement("div",{className:he.a.headerStatTotalQuantity},a.toLocaleString()))}var ye=a(32),Oe=a.n(ye);function je(e){var t=e.dataKey,a=e.label,n=e.sortBy,r=e.sortDirection;return o.a.createElement("div",{key:t,className:Oe.a.headerCol},o.a.createElement("span",null,a),o.a.createElement("span",null,n===t&&o.a.createElement(B.d,{sortDirection:r})))}function Ce(){var e=Object(f.b)(),t=Object(f.c)(ce),a=Object(f.c)(Y).format("M/D/YY"),r=Object(f.c)(A),i=Object(f.c)(x),c=Object(f.c)(M);return o.a.createElement("div",{style:{height:"100%"}},o.a.createElement("div",{className:Object(d.a)(Oe.a.tableContainer,!c&&Oe.a.hiddenForMobile)},o.a.createElement(B.a,null,(function(l){var u=l.width,d=l.height,s=(u-50)/100*17.5,m=(u-50)/100*30;return o.a.createElement(B.e,{width:u,height:d,headerHeight:40,rowHeight:50,rowCount:t.length,rowClassName:ge,rowGetter:function(e){var a=e.index;return t[a]},onRowClick:function(t){var a=t.rowData;c&&e(G()),e(D({longitude:a.coordinates.longitude,latitude:a.coordinates.latitude,zoom:6}))},sort:function(t){var a=t.sortBy,n=t.sortDirection;return e(K({sortBy:a,sortDirection:n}))},sortBy:r,sortDirection:i},o.a.createElement(B.b,{label:"#",dataKey:"index",disableSort:!0,width:50,headerRenderer:je}),o.a.createElement(B.b,{width:m,label:"Country",dataKey:"country",defaultSortDirection:"ASC",headerRenderer:je}),o.a.createElement(B.b,{label:"Confirmed",dataKey:n.Comfirmed,defaultSortDirection:"DESC",width:s,headerRenderer:je,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),o.a.createElement(B.b,{label:"Recovered",dataKey:n.Recovered,defaultSortDirection:"DESC",width:s,headerRenderer:je,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),o.a.createElement(B.b,{label:"Deaths",dataKey:n.Deaths,defaultSortDirection:"DESC",width:s,headerRenderer:je,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),o.a.createElement(B.b,{label:"Active",dataKey:n.Active,defaultSortDirection:"DESC",width:s,headerRenderer:je,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}))}))),o.a.createElement("div",{className:Oe.a.toggleTable,onClick:function(){return e(G())}},"".concat(c?"Hide":"Show"," table")))}function ge(e){var t=e.index;return t>=0?t%2?Oe.a.evenRow:Oe.a.oddRow:Oe.a.headerRow}a(184);var De=Object(i.memo)((function(e){var t=e.date,a=void 0===t?S()():t,n=e.onChange,r=e.minDate,c=e.maxDate,l=Object(i.useCallback)((function(e){var t=a.clone().dayOfYear(+e.currentTarget.value);return n(t)}),[a,n]);return o.a.createElement("div",{className:"timeline-panel"},o.a.createElement("label",null,a.format("LL")),o.a.createElement("input",{className:"range",type:"range",value:a.dayOfYear(),step:1,min:null===r||void 0===r?void 0:r.dayOfYear(),max:null===c||void 0===c?void 0:c.dayOfYear(),onChange:l}))}));function Ee(){var e=Object(f.b)(),t=Object(f.c)(Y),a=Object(f.c)(T),r=Object(f.c)(le),i=Object(f.c)(M);return o.a.createElement("div",{className:Object(d.a)(he.a.sideBar,i&&he.a.open)},o.a.createElement("div",{className:he.a.header},o.a.createElement(pe,{label:"Confirmed",quantity:r.confirmed,activeColor:h[a],isActive:a===n.Comfirmed,onClick:function(){return e(L(n.Comfirmed))}}),o.a.createElement(pe,{label:"Recovered",quantity:r.recovered,activeColor:h[a],isActive:a===n.Recovered,onClick:function(){return e(L(n.Recovered))}}),o.a.createElement(pe,{label:"Deaths",quantity:r.deaths,activeColor:h[a],isActive:a===n.Deaths,onClick:function(){return e(L(n.Deaths))}}),o.a.createElement(pe,{label:"Active",quantity:r.active,activeColor:h[a],isActive:a===n.Active,onClick:function(){return e(L(n.Active))}})),o.a.createElement(De,{date:S()(t),onChange:function(t){return e(F(t.format()))},minDate:S()("2020-01-22T00:00:00"),maxDate:S()()}),o.a.createElement(Ce,null))}a(185);var we=function(){var e=Object(f.b)(),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te.Dark:te.Light,a=Object(i.useState)(t),n=Object(u.a)(a,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){e(ae())}),[e]),o.a.createElement(fe.Provider,{value:{theme:r,switchTheme:c}},o.a.createElement("div",{className:Object(d.a)("App",r)},o.a.createElement(Ee,null),o.a.createElement(be,null)))},Se=Object(j.a)({reducer:{countries:de,map:E,sideBar:I},middleware:Object(j.d)()});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(f.a,{store:Se},o.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,a){e.exports={sideBar:"SideBar_sideBar__3wXsx",open:"SideBar_open__EKK0f",header:"SideBar_header__1g25-",headerStat:"SideBar_headerStat__3YXJj",headerStatLabel:"SideBar_headerStatLabel__4KGyw",headerStatTotalQuantity:"SideBar_headerStatTotalQuantity__hZtn3"}},32:function(e,t,a){e.exports={tableContainer:"CountriesTable_tableContainer__HsFmS",toggleTable:"CountriesTable_toggleTable__1hgWR",hiddenForMobile:"CountriesTable_hiddenForMobile__3k__Z",headerCol:"CountriesTable_headerCol__2UGwN",headerRow:"CountriesTable_headerRow__9aWhl",evenRow:"CountriesTable_evenRow__24xvc",oddRow:"CountriesTable_oddRow__3SP1f"}},84:function(e,t,a){e.exports={mapContainer:"Map_mapContainer__dIyOX",tooltip:"Map_tooltip__2ttIR"}}},[[113,1,2]]]);
//# sourceMappingURL=main.db0ff92e.chunk.js.map