(this["webpackJsonpcorona-app"]=this["webpackJsonpcorona-app"]||[]).push([[0],{114:function(e,t,a){e.exports=a(187)},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(25),c=a.n(o),l=a(13),u=a(52),d=a(12);!function(e){e.Light="light",e.Dark="dark"}(n||(n={}));var s=i.a.createContext({theme:n.Dark,switchTheme:function(e){}});var m,f,b=a(15),v=a(34),h=a.n(v),p=a(51),y=a(26),O=a(23),j=a(108),C=a.n(j),g=a(16),D=a(9),E=a(22),w=a.n(E);!function(e){e.Active="active",e.Comfirmed="confirmed",e.Deaths="deaths",e.Recovered="recovered"}(m||(m={}));var S=(f={},Object(D.a)(f,m.Active,{}),Object(D.a)(f,m.Comfirmed,{}),Object(D.a)(f,m.Deaths,{}),Object(D.a)(f,m.Recovered,{}),f);function _(){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["https://corona.lmao.ninja/v2/countries","https://corona.lmao.ninja/v2/historical?lastdays=all"],e.next=3,Promise.all(t.map(function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return a=e.sent,n=R(a[0]),r=k(a[1],n),e.abrupt("return",Object.values(n).reduce((function(e,t){var a,n=r[t.country],i=n?n.timeline:S;return Object.keys(i[m.Comfirmed]).length||console.warn("countries without timeline",t),Object(b.a)({},e,Object(D.a)({},t.country,Object(b.a)({},t,{timeline:A((a={},Object(D.a)(a,m.Active,Object(b.a)({},i[m.Active],{},t.timeline[m.Active])),Object(D.a)(a,m.Comfirmed,Object(b.a)({},i[m.Comfirmed],{},t.timeline[m.Comfirmed])),Object(D.a)(a,m.Deaths,Object(b.a)({},i[m.Deaths],{},t.timeline[m.Deaths])),Object(D.a)(a,m.Recovered,Object(b.a)({},i[m.Recovered],{},t.timeline[m.Recovered])),a))})))}),{}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=w.a.utc().format("M/D/YY");return e.reduce((function(e,a){var n,r,i={country:a.country,province:null,coordinates:{latitude:a.countryInfo.lat,longitude:a.countryInfo.long},timeline:(n={},Object(D.a)(n,m.Active,Object(D.a)({},t,a.cases-a.deaths-a.recovered)),Object(D.a)(n,m.Comfirmed,Object(D.a)({},t,a.cases)),Object(D.a)(n,m.Deaths,Object(D.a)({},t,a.deaths)),Object(D.a)(n,m.Recovered,Object(D.a)({},t,a.recovered)),n),updated:a.updated};return Object(b.a)({},e,Object(D.a)({},(x[r=i.country]||r).toLowerCase(),i))}),{})}function k(e,t){return e.reduce((function(e,a){var n,r,i,o,c,l={country:(null===(n=t[a.country])||void 0===n?void 0:n.country)||T(a.country),province:(null===(r=t[a.province])||void 0===r?void 0:r.country)||T(a.province),coordinates:{latitude:0,longitude:0},timeline:(i={},Object(D.a)(i,m.Active,Object.keys(a.timeline.cases).reduce((function(e,t){var n=a.timeline.cases[t]-a.timeline.deaths[t]-a.timeline.recovered[t];return e[t]=n,e}),{})),Object(D.a)(i,m.Comfirmed,a.timeline.cases),Object(D.a)(i,m.Deaths,a.timeline.deaths),Object(D.a)(i,m.Recovered,a.timeline.recovered),i)},u=["Australia","China","Canada"].includes(l.country);return e[l.country]||l.province&&!u||(e[l.country]=Object(b.a)({},l,{province:null,timeline:l.province?S:l.timeline})),l.province&&(e[l.province]=l),e[l.country]&&l.province&&u&&(e[l.country].timeline=(o=e[l.country].timeline,c=l.timeline,Object.keys(o).reduce((function(e,t){var a=Object.keys(o[t]),n=Object.keys(c[t]),r=a.length?a:n;return Object(b.a)({},e,Object(D.a)({},t,r.reduce((function(e,a){return Object(b.a)({},e,Object(D.a)({},a,(o[t][a]||0)+(c[t][a]||0)))}),{})))}),S))),e}),{})}function A(e){return Object.keys(e).reduce((function(t,a){return Object(b.a)({},t,Object(D.a)({},a,Object.keys(e[a]).reduce((function(t,n){return e[a][n]&&(t[n]=e[a][n]),t}),{})))}),S)}var x={"C\xf4te d'Ivoire":"Cote d'Ivoire",Palestine:"West Bank and Gaza","Lao People's Democratic Republic":'Lao People"s Democratic Republic',Myanmar:"Burma","Holy See (Vatican City State)":"Holy See","R\xe9union":"Reunion",Macao:"macau","Saint Martin":"st martin","St. Barth":"saint barthelemy","Saint Pierre Miquelon":"saint pierre and miquelon","Cura\xe7ao":"curacao","Caribbean Netherlands":"bonaire, sint eustatius and saba"};function T(e){return Object.keys(x).reduce((function(e,t){return Object(b.a)({},e,Object(D.a)({},x[t],t))}),{})[e]||e}var M,Y={filterBy:m.Comfirmed,sortBy:m.Comfirmed,sortDirection:g.c.DESC,timelineDate:w()().format(),isTableVisibleOnMobile:!1},N=Object(y.c)({name:"sideBar",initialState:Y,reducers:{setFilterType:function(e,t){e.filterBy=t.payload},setTimelineDate:function(e,t){e.timelineDate=t.payload},sort:function(e,t){e.sortBy=t.payload.sortBy,e.sortDirection=t.payload.sortDirection},toggleTableVisibility:function(e){e.isTableVisibleOnMobile=!e.isTableVisibleOnMobile}}}),L=function(e){return e.sideBar.sortBy},F=function(e){return e.sideBar.sortDirection},K=function(e){return e.sideBar.filterBy},G=function(e){return e.sideBar.isTableVisibleOnMobile},I=Object(O.a)([function(e){return e.sideBar.timelineDate}],(function(e){return w()(e)})),V=N.actions,P=V.setFilterType,H=V.setTimelineDate,X=V.sort,q=V.toggleTableVisibility,z=N.reducer,J=Object(y.b)("countries/fetchCountries",Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Q=Object(y.c)({name:"countries",initialState:{loading:"idle",countriesByName:{},error:null},reducers:{},extraReducers:function(e){e.addCase(J.pending,(function(e){"idle"===e.loading&&(e.loading="pending")})).addCase(J.fulfilled,(function(e,t){"pending"===e.loading&&(e.loading="idle"),e.countriesByName=t.payload})).addCase(J.rejected,(function(e,t){e.error=t.error}))}}),W=function(e){return e.countries.countriesByName},Z=Object(O.a)([W],(function(e){return Object.values(e)})),U=Object(O.a)([Z,I],(function(e,t){var a=t.format("M/D/YY");return e.filter((function(e){return e.timeline.active[a]||e.timeline.confirmed[a]||e.timeline.deaths[a]||e.timeline.recovered[a]}))})),$=Object(O.a)([U,I,L,F],(function(e,t,a,n){var r=t.format("M/D/YY"),i=Object.values(m).includes(a);return C.a.orderBy(e,(function(e){return i?e.timeline[a][r]||0:e[a]}),n===g.c.ASC?"asc":"desc").map((function(e,t){return Object(b.a)({},e,{index:t+1})}))})),ee=Object(O.a)([U,I],(function(e,t){var a=t.format("M/D/YY");return e.reduce((function(e,t){return{active:e.active+(t.timeline.active[a]||0),confirmed:e.confirmed+(t.timeline.confirmed[a]||0),deaths:e.deaths+(t.timeline.deaths[a]||0),recovered:e.recovered+(t.timeline.recovered[a]||0)}}),{active:0,confirmed:0,deaths:0,recovered:0})})),te=Object(O.a)([U],(function(e){return{type:"FeatureCollection",features:e.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.coordinates.longitude,e.coordinates.latitude]},properties:e}}))}})),ae=Q.reducer,ne=a(63),re=(a(182),a(44)),ie=a(85),oe=a.n(ie),ce=Object(y.c)({name:"map",initialState:{viewport:{longitude:0,latitude:15,zoom:1.5}},reducers:{setViewport:function(e,t){e.viewport=t.payload}}}),le=function(e){return e.map.viewport},ue=ce.actions.setViewport,de=ce.reducer,se=(M={},Object(D.a)(M,m.Comfirmed,"#FF5733"),Object(D.a)(M,m.Recovered,"#7ECB88"),Object(D.a)(M,m.Deaths,"#BD33FF"),Object(D.a)(M,m.Active,"#FFBD33"),M);function me(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e6,t=[0,1,5,10,50,100,500,1e3,2e3],a=5e3;a<=e;)t.push(a),a+=a<1e5?5e3:a<2e5?1e4:2e4;return t.reduce((function(e,t,a){return[].concat(Object(ne.a)(e),[t,a+4])}),[])}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return[e,t,["get",a,["get","timeline"]]]}var be=Object(r.memo)((function(){var e,t,a,o,c=Object(r.useRef)(null),d=Object(r.useContext)(s).theme,f=Object(l.c)(le),v=Object(r.useState)(f),h=Object(u.a)(v,2),p=h[0],y=h[1],O=Object(r.useState)({country:null,offsetX:0,offsetY:0}),j=Object(u.a)(O,2),C=j[0],g=j[1],D=Object(l.c)(W),E=Object(l.c)(te),w=Object(l.c)(K),S=Object(l.c)(I).format("M/D/YY"),_=fe("has",S,w),B=fe("get",S,w),R=Object(r.useCallback)((function(e){var t=e.features,a=void 0===t?[]:t,n=e.srcEvent,r=n.offsetX,i=n.offsetY,o=a.find((function(e){return["label","point"].includes(e.layer.id)}));if(o&&o.properties&&o.properties.country){if(C.country!==o.properties.country)return g({offsetX:r,offsetY:i,country:D[o.properties.country]})}else if(C.country)return g({offsetX:0,offsetY:0,country:null})}),[D,C]);return Object(r.useEffect)((function(){y(Object(b.a)({},f,{transitionInterpolator:new re.a({speed:1.2}),transitionDuration:"auto"}))}),[f]),i.a.createElement("div",{className:oe.a.mapContainer},i.a.createElement(re.d,Object.assign({ref:c},p,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/".concat(d,"-v10"),mapboxApiAccessToken:"pk.eyJ1IjoiZGVtcGtoIiwiYSI6ImNrOGZwanFuazAxdnozbG4yNm1tOHVuYzkifQ.fRJrCsndLJ4yM-jlPaAG9Q",onViewportChange:function(e){return y(e)},onHover:R}),i.a.createElement(re.c,{id:"data",type:"geojson",data:E},i.a.createElement(re.b,{id:"point",type:"circle",filter:["all",_,[">",B,0]],paint:{"circle-radius":["interpolate",["linear"],B].concat(Object(ne.a)(me())),"circle-color":se[w],"circle-opacity":.4,"circle-stroke-width":1,"circle-stroke-color":se[w]}}),i.a.createElement(re.b,{id:"label",type:"symbol",filter:["all",_,[">",B,0]],paint:{"text-color":d===n.Light?"#3B3B3B":"#EBEBEB"},layout:{"text-field":B,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}})),C.country?i.a.createElement("div",{className:oe.a.tooltip,style:{top:C.offsetY,left:C.offsetX}},i.a.createElement("b",null,C.country.country),i.a.createElement("div",null,i.a.createElement("span",null,"Confirmed:"),i.a.createElement("span",{style:{color:se[m.Comfirmed]}},(null===(e=C.country.timeline[m.Comfirmed][S])||void 0===e?void 0:e.toLocaleString())||0)),i.a.createElement("div",null,i.a.createElement("span",null,"Deaths:"),i.a.createElement("span",{style:{color:se[m.Deaths]}},(null===(t=C.country.timeline[m.Deaths][S])||void 0===t?void 0:t.toLocaleString())||0)),i.a.createElement("div",null,i.a.createElement("span",null,"Recovered:"),i.a.createElement("span",{style:{color:se[m.Recovered]}},(null===(a=C.country.timeline[m.Recovered][S])||void 0===a?void 0:a.toLocaleString())||0)),i.a.createElement("div",null,i.a.createElement("span",null,"Active:"),i.a.createElement("span",{style:{color:se[m.Active]}},(null===(o=C.country.timeline[m.Active][S])||void 0===o?void 0:o.toLocaleString())||0))):null))})),ve=a(31),he=a.n(ve);function pe(e){var t=e.dataKey,a=e.label,n=e.sortBy,r=e.sortDirection;return i.a.createElement("div",{key:t,className:he.a.headerCol},i.a.createElement("span",null,a),i.a.createElement("span",null,n===t&&i.a.createElement(g.d,{sortDirection:r})))}function ye(){var e=Object(l.b)(),t=Object(l.c)($),a=Object(l.c)(I).format("M/D/YY"),n=Object(l.c)(L),r=Object(l.c)(F),o=Object(l.c)(G);return i.a.createElement("div",{style:{height:"100%"}},i.a.createElement("div",{className:Object(d.a)(he.a.tableContainer,!o&&he.a.hiddenForMobile)},i.a.createElement(g.a,null,(function(c){var l=c.width,u=c.height,d=(l-50)/100*17.5,s=(l-50)/100*30;return i.a.createElement(g.e,{width:l,height:u,headerHeight:40,rowHeight:50,rowCount:t.length,rowClassName:Oe,rowGetter:function(e){var a=e.index;return t[a]},onRowClick:function(t){var a=t.rowData;o&&e(q()),e(ue({longitude:a.coordinates.longitude,latitude:a.coordinates.latitude,zoom:6}))},sort:function(t){var a=t.sortBy,n=t.sortDirection;return e(X({sortBy:a,sortDirection:n}))},sortBy:n,sortDirection:r},i.a.createElement(g.b,{label:"#",dataKey:"index",disableSort:!0,width:50,headerRenderer:pe}),i.a.createElement(g.b,{width:s,label:"Country",dataKey:"country",defaultSortDirection:"ASC",headerRenderer:pe}),i.a.createElement(g.b,{label:"Confirmed",dataKey:m.Comfirmed,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),i.a.createElement(g.b,{label:"Recovered",dataKey:m.Recovered,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),i.a.createElement(g.b,{label:"Deaths",dataKey:m.Deaths,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),i.a.createElement(g.b,{label:"Active",dataKey:m.Active,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}))}))),i.a.createElement("div",{className:he.a.toggleTable,onClick:function(){return e(q())}},"".concat(o?"Hide":"Show"," table")))}function Oe(e){var t=e.index;return t>=0?t%2?he.a.evenRow:he.a.oddRow:he.a.headerRow}var je=a(32),Ce=a.n(je);function ge(e){var t=e.label,a=e.quantity,n=e.activeColor,r=e.isActive,o=e.onClick;return i.a.createElement("div",{className:Object(d.a)(Ce.a.headerStat,r&&Ce.a.headerStatActive),style:r?{color:n}:{},onClick:o},i.a.createElement("div",{className:Ce.a.headerStatLabel},t),i.a.createElement("div",{className:Ce.a.headerStatTotalQuantity},a.toLocaleString()))}a(184);var De=Object(r.memo)((function(e){var t=e.date,a=void 0===t?w()():t,n=e.onChange,o=e.minDate,c=e.maxDate,l=Object(r.useCallback)((function(e){var t=a.clone().dayOfYear(+e.currentTarget.value);return n(t)}),[a,n]);return i.a.createElement("div",{className:"timeline-panel"},i.a.createElement("label",null,a.format("LL")),i.a.createElement("input",{className:"range",type:"range",value:a.dayOfYear(),step:1,min:null===o||void 0===o?void 0:o.dayOfYear(),max:null===c||void 0===c?void 0:c.dayOfYear(),onChange:l}))}));function Ee(){var e=Object(l.b)(),t=Object(l.c)(I),a=Object(l.c)(K),n=Object(l.c)(ee),r=Object(l.c)(G);return i.a.createElement("div",{className:Object(d.a)(Ce.a.sideBar,r&&Ce.a.open)},i.a.createElement("div",{className:Ce.a.header},i.a.createElement(ge,{label:"Confirmed",quantity:n.confirmed,activeColor:se[a],isActive:a===m.Comfirmed,onClick:function(){return e(P(m.Comfirmed))}}),i.a.createElement(ge,{label:"Recovered",quantity:n.recovered,activeColor:se[a],isActive:a===m.Recovered,onClick:function(){return e(P(m.Recovered))}}),i.a.createElement(ge,{label:"Deaths",quantity:n.deaths,activeColor:se[a],isActive:a===m.Deaths,onClick:function(){return e(P(m.Deaths))}}),i.a.createElement(ge,{label:"Active",quantity:n.active,activeColor:se[a],isActive:a===m.Active,onClick:function(){return e(P(m.Active))}})),i.a.createElement(De,{date:w()(t),onChange:function(t){return e(H(t.format()))},minDate:w()("2020-01-22T00:00:00"),maxDate:w()()}),i.a.createElement(ye,null))}a(185);var we=function(){var e=Object(l.b)(),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?n.Dark:n.Light,a=Object(r.useState)(t),o=Object(u.a)(a,2),c=o[0],m=o[1];return Object(r.useEffect)((function(){e(J())}),[e]),i.a.createElement(s.Provider,{value:{theme:c,switchTheme:m}},i.a.createElement("div",{className:Object(d.a)("App",c)},i.a.createElement(Ee,null),i.a.createElement(be,null)))},Se=Object(y.a)({reducer:{countries:ae,map:de,sideBar:z},middleware:Object(y.d)()});a(186),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(l.a,{store:Se},i.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,a){e.exports={tableContainer:"CountriesTable_tableContainer__HsFmS",toggleTable:"CountriesTable_toggleTable__1hgWR",hiddenForMobile:"CountriesTable_hiddenForMobile__3k__Z",headerCol:"CountriesTable_headerCol__2UGwN",headerRow:"CountriesTable_headerRow__9aWhl",evenRow:"CountriesTable_evenRow__24xvc",oddRow:"CountriesTable_oddRow__3SP1f"}},32:function(e,t,a){e.exports={sideBar:"SideBar_sideBar__3wXsx",open:"SideBar_open__EKK0f",header:"SideBar_header__1g25-",headerStat:"SideBar_headerStat__3YXJj",headerStatLabel:"SideBar_headerStatLabel__4KGyw",headerStatTotalQuantity:"SideBar_headerStatTotalQuantity__hZtn3"}},85:function(e,t,a){e.exports={mapContainer:"Map_mapContainer__dIyOX",tooltip:"Map_tooltip__2ttIR"}}},[[114,1,2]]]);
//# sourceMappingURL=main.703ed960.chunk.js.map