(this["webpackJsonpcorona-app"]=this["webpackJsonpcorona-app"]||[]).push([[0],{113:function(e,t,a){e.exports=a(186)},118:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n,r,i=a(0),o=a.n(i),c=a(25),l=a.n(c),u=(a(118),a(62)),d=a(15),s=a(9),m=a(12),f=a(44),v=(a(124),a(1));!function(e){e.Active="active",e.Comfirmed="confirmed",e.Deaths="deaths",e.Recovered="recovered"}(n||(n={}));var b=(r={},Object(v.a)(r,n.Comfirmed,"#FF5733"),Object(v.a)(r,n.Recovered,"#75FF33"),Object(v.a)(r,n.Deaths,"#BD33FF"),Object(v.a)(r,n.Active,"#FFBD33"),r);function p(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e6,t=[0,1,5,10,50,100,500,1e3,2e3],a=5e3;a<=e;)t.push(a),a+=a<1e5?5e3:a<2e5?1e4:2e4;return t.reduce((function(e,t,a){return[].concat(Object(u.a)(e),[t,a+4])}),[])}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return[e,t,["get",a,["get","timeline"]]]}var h,j=a(26),O=Object(j.c)({name:"map",initialState:{viewport:{longitude:0,latitude:15,zoom:1.5}},reducers:{setViewport:function(e,t){e.viewport=t.payload}}}),C=function(e){return e.map.viewport},D=O.actions.setViewport,E=O.reducer,w=a(22),g=a.n(w),S=a(23),B=a(16),R={filterBy:n.Comfirmed,sortBy:n.Comfirmed,sortDirection:B.c.DESC,timelineDate:g()().format()},_=Object(j.c)({name:"sideBar",initialState:R,reducers:{setFilterType:function(e,t){e.filterBy=t.payload},setTimelineDate:function(e,t){e.timelineDate=t.payload},sort:function(e,t){e.sortBy=t.payload.sortBy,e.sortDirection=t.payload.sortDirection}}}),k=function(e){return e.sideBar.sortBy},A=function(e){return e.sideBar.sortDirection},x=function(e){return e.sideBar.filterBy},Y=Object(S.a)([function(e){return e.sideBar.timelineDate}],(function(e){return g()(e)})),N=_.actions,L=N.setFilterType,F=N.setTimelineDate,M=N.sort,T=_.reducer,G=a(33),I=a.n(G),K=a(51),P=a(112),H=a.n(P),X=(h={},Object(v.a)(h,n.Active,{}),Object(v.a)(h,n.Comfirmed,{}),Object(v.a)(h,n.Deaths,{}),Object(v.a)(h,n.Recovered,{}),h);function q(){return z.apply(this,arguments)}function z(){return(z=Object(K.a)(I.a.mark((function e(){var t,a,r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["https://corona.lmao.ninja/countries","https://corona.lmao.ninja/v2/historical?lastdays=all"],e.next=3,Promise.all(t.map(function(){var e=Object(K.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return a=e.sent,r=J(a[0]),i=V(a[1],r),e.abrupt("return",Object.values(r).reduce((function(e,t){var a,r=i[t.country],o=r?r.timeline:X;return Object.keys(o[n.Comfirmed]).length||console.warn("countries without timeline",t),Object(d.a)({},e,Object(v.a)({},t.country,Object(d.a)({},t,{timeline:Q((a={},Object(v.a)(a,n.Active,Object(d.a)({},o[n.Active],{},t.timeline[n.Active])),Object(v.a)(a,n.Comfirmed,Object(d.a)({},o[n.Comfirmed],{},t.timeline[n.Comfirmed])),Object(v.a)(a,n.Deaths,Object(d.a)({},o[n.Deaths],{},t.timeline[n.Deaths])),Object(v.a)(a,n.Recovered,Object(d.a)({},o[n.Recovered],{},t.timeline[n.Recovered])),a))})))}),{}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=g.a.utc().format("M/D/YY");return e.reduce((function(e,a){var r,i,o={country:a.country,province:null,coordinates:{latitude:a.countryInfo.lat,longitude:a.countryInfo.long},timeline:(r={},Object(v.a)(r,n.Active,Object(v.a)({},t,a.cases-a.deaths-a.recovered)),Object(v.a)(r,n.Comfirmed,Object(v.a)({},t,a.cases)),Object(v.a)(r,n.Deaths,Object(v.a)({},t,a.deaths)),Object(v.a)(r,n.Recovered,Object(v.a)({},t,a.recovered)),r),updated:a.updated};return Object(d.a)({},e,Object(v.a)({},(W[i=o.country]||i).toLowerCase(),o))}),{})}function V(e,t){return e.reduce((function(e,a){var r,i,o,c,l,u={country:(null===(r=t[a.country])||void 0===r?void 0:r.country)||Z(a.country),province:(null===(i=t[a.province])||void 0===i?void 0:i.country)||Z(a.province),coordinates:{latitude:0,longitude:0},timeline:(o={},Object(v.a)(o,n.Active,Object.keys(a.timeline.cases).reduce((function(e,t){var n=a.timeline.cases[t]-a.timeline.deaths[t]-a.timeline.recovered[t];return e[t]=n,e}),{})),Object(v.a)(o,n.Comfirmed,a.timeline.cases),Object(v.a)(o,n.Deaths,a.timeline.deaths),Object(v.a)(o,n.Recovered,a.timeline.recovered),o)},s=["Australia","China","Canada"].includes(u.country);return e[u.country]||u.province&&!s||(e[u.country]=Object(d.a)({},u,{province:null,timeline:u.province?X:u.timeline})),u.province&&(e[u.province]=u),e[u.country]&&u.province&&s&&(e[u.country].timeline=(c=e[u.country].timeline,l=u.timeline,Object.keys(c).reduce((function(e,t){var a=Object.keys(c[t]),n=Object.keys(l[t]),r=a.length?a:n;return Object(d.a)({},e,Object(v.a)({},t,r.reduce((function(e,a){return Object(d.a)({},e,Object(v.a)({},a,(c[t][a]||0)+(l[t][a]||0)))}),{})))}),X))),e}),{})}function Q(e){return Object.keys(e).reduce((function(t,a){return Object(d.a)({},t,Object(v.a)({},a,Object.keys(e[a]).reduce((function(t,n){return e[a][n]&&(t[n]=e[a][n]),t}),{})))}),X)}var W={"C\xf4te d'Ivoire":"Cote d'Ivoire",Palestine:"West Bank and Gaza","Lao People's Democratic Republic":'Lao People"s Democratic Republic',Myanmar:"Burma","Holy See (Vatican City State)":"Holy See","R\xe9union":"Reunion",Macao:"macau","Saint Martin":"st martin","St. Barth":"saint barthelemy","Saint Pierre Miquelon":"saint pierre and miquelon","Cura\xe7ao":"curacao","Caribbean Netherlands":"bonaire, sint eustatius and saba"};function Z(e){return Object.keys(W).reduce((function(e,t){return Object(d.a)({},e,Object(v.a)({},W[t],t))}),{})[e]||e}var U=Object(j.b)("countries/fetchCountries",Object(K.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),$=Object(j.c)({name:"countries",initialState:{loading:"idle",countriesByName:{},error:null},reducers:{},extraReducers:function(e){e.addCase(U.pending,(function(e){"idle"===e.loading&&(e.loading="pending")})).addCase(U.fulfilled,(function(e,t){"pending"===e.loading&&(e.loading="idle"),e.countriesByName=t.payload})).addCase(U.rejected,(function(e,t){e.error=t.error}))}}),ee=function(e){return e.countries.countriesByName},te=Object(S.a)([ee],(function(e){return Object.values(e)})),ae=Object(S.a)([te,Y],(function(e,t){var a=t.format("M/D/YY");return e.filter((function(e){return e.timeline.active[a]||e.timeline.confirmed[a]||e.timeline.deaths[a]||e.timeline.recovered[a]}))})),ne=Object(S.a)([ae,Y,k,A],(function(e,t,a,r){var i=t.format("M/D/YY"),o=Object.values(n).includes(a);return H.a.orderBy(e,(function(e){return o?e.timeline[a][i]||0:e[a]}),r===B.c.ASC?"asc":"desc").map((function(e,t){return Object(d.a)({},e,{index:t+1})}))})),re=Object(S.a)([ae,Y],(function(e,t){var a=t.format("M/D/YY");return e.reduce((function(e,t){return{active:e.active+(t.timeline.active[a]||0),confirmed:e.confirmed+(t.timeline.confirmed[a]||0),deaths:e.deaths+(t.timeline.deaths[a]||0),recovered:e.recovered+(t.timeline.recovered[a]||0)}}),{active:0,confirmed:0,deaths:0,recovered:0})})),ie=Object(S.a)([ae],(function(e){return{type:"FeatureCollection",features:e.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.coordinates.longitude,e.coordinates.latitude]},properties:e}}))}})),oe=$.reducer,ce=a(84),le=a.n(ce);var ue=Object(i.memo)((function(){var e,t,a,r,c=Object(i.useRef)(null),l=Object(m.c)(C),v=Object(i.useState)(l),h=Object(s.a)(v,2),j=h[0],O=h[1],D=Object(i.useState)({country:null,offsetX:0,offsetY:0}),E=Object(s.a)(D,2),w=E[0],g=E[1],S=Object(m.c)(ee),B=Object(m.c)(ie),R=Object(m.c)(x),_=Object(m.c)(Y).format("M/D/YY"),k=y("has",_,R),A=y("get",_,R),N=Object(i.useCallback)((function(e){var t=e.features,a=void 0===t?[]:t,n=e.srcEvent,r=n.offsetX,i=n.offsetY,o=a.find((function(e){return["label","point"].includes(e.layer.id)}));if(o&&o.properties&&o.properties.country){if(w.country!==o.properties.country)return g({offsetX:r,offsetY:i,country:S[o.properties.country]})}else if(w.country)return g({offsetX:0,offsetY:0,country:null})}),[S,w]);return Object(i.useEffect)((function(){O(Object(d.a)({},l,{transitionInterpolator:new f.a({speed:1.2}),transitionDuration:"auto"}))}),[l]),o.a.createElement("div",{className:le.a.mapContainer},o.a.createElement(f.d,Object.assign({ref:c},j,{width:"100%",height:"100vh",mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxApiAccessToken:"pk.eyJ1IjoiZGVtcGtoIiwiYSI6ImNrOGZwanFuazAxdnozbG4yNm1tOHVuYzkifQ.fRJrCsndLJ4yM-jlPaAG9Q",onViewportChange:function(e){return O(e)},onHover:N}),o.a.createElement(f.c,{id:"data",type:"geojson",data:B},o.a.createElement(f.b,{id:"point",type:"circle",filter:["all",k,[">",A,0]],paint:{"circle-radius":["interpolate",["linear"],A].concat(Object(u.a)(p())),"circle-color":b[R],"circle-opacity":.4,"circle-stroke-width":1,"circle-stroke-color":b[R]}}),o.a.createElement(f.b,{id:"label",type:"symbol",filter:["all",k,[">",A,0]],paint:{"text-color":"#EBEBEB"},layout:{"text-field":A,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}})),w.country?o.a.createElement("div",{className:le.a.tooltip,style:{top:w.offsetY,left:w.offsetX}},o.a.createElement("b",null,w.country.country),o.a.createElement("div",null,o.a.createElement("span",null,"Confirmed:"),o.a.createElement("span",{style:{color:b[n.Comfirmed]}},(null===(e=w.country.timeline[n.Comfirmed][_])||void 0===e?void 0:e.toLocaleString())||0)),o.a.createElement("div",null,o.a.createElement("span",null,"Deaths:"),o.a.createElement("span",{style:{color:b[n.Deaths]}},(null===(t=w.country.timeline[n.Deaths][_])||void 0===t?void 0:t.toLocaleString())||0)),o.a.createElement("div",null,o.a.createElement("span",null,"Recovered:"),o.a.createElement("span",{style:{color:b[n.Recovered]}},(null===(a=w.country.timeline[n.Recovered][_])||void 0===a?void 0:a.toLocaleString())||0)),o.a.createElement("div",null,o.a.createElement("span",null,"Active:"),o.a.createElement("span",{style:{color:b[n.Active]}},(null===(r=w.country.timeline[n.Active][_])||void 0===r?void 0:r.toLocaleString())||0))):null))})),de=a(14),se=a(31),me=a.n(se);function fe(e){var t=e.label,a=e.quantity,n=e.activeColor,r=e.isActive,i=e.onClick;return o.a.createElement("div",{className:Object(de.a)(me.a.headerStat,r&&me.a.headerStatActive),style:r?{color:n}:{},onClick:i},o.a.createElement("div",{className:me.a.headerStatLabel},t),o.a.createElement("div",{className:me.a.headerStatTotalQuantity},a.toLocaleString()))}var ve=a(37),be=a.n(ve);function pe(e){var t=e.dataKey,a=e.label,n=e.sortBy,r=e.sortDirection;return o.a.createElement("div",{key:t,className:be.a.headerCol},o.a.createElement("span",null,a),o.a.createElement("span",null,n===t&&o.a.createElement(B.d,{sortDirection:r})))}function ye(){var e=Object(m.b)(),t=Object(m.c)(ne),a=Object(m.c)(Y).format("M/D/YY"),r=Object(m.c)(k),i=Object(m.c)(A);return o.a.createElement("div",{className:be.a.tableContainer},o.a.createElement(B.a,null,(function(c){var l=c.width,u=c.height,d=(l-50)/100*17.5,s=(l-50)/100*30;return o.a.createElement(B.e,{width:l,height:u,headerHeight:40,rowHeight:50,rowCount:t.length,rowClassName:he,rowGetter:function(e){var a=e.index;return t[a]},onRowClick:function(t){var a=t.rowData;return e(D({longitude:a.coordinates.longitude,latitude:a.coordinates.latitude,zoom:6}))},sort:function(t){var a=t.sortBy,n=t.sortDirection;return e(M({sortBy:a,sortDirection:n}))},sortBy:r,sortDirection:i},o.a.createElement(B.b,{label:"#",dataKey:"index",disableSort:!0,width:50,headerRenderer:pe}),o.a.createElement(B.b,{width:s,label:"Country",dataKey:"country",defaultSortDirection:"ASC",headerRenderer:pe}),o.a.createElement(B.b,{label:"Confirmed",dataKey:n.Comfirmed,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),o.a.createElement(B.b,{label:"Recovered",dataKey:n.Recovered,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),o.a.createElement(B.b,{label:"Deaths",dataKey:n.Deaths,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}),o.a.createElement(B.b,{label:"Active",dataKey:n.Active,defaultSortDirection:"DESC",width:d,headerRenderer:pe,cellDataGetter:function(e){var t,n=e.dataKey;return(null===(t=e.rowData.timeline[n][a])||void 0===t?void 0:t.toLocaleString())||0}}))})))}function he(e){var t=e.index;return t>=0?t%2?be.a.evenRow:be.a.oddRow:be.a.headerRow}a(184);var je=Object(i.memo)((function(e){var t=e.date,a=void 0===t?g()():t,n=e.onChange,r=e.minDate,c=e.maxDate,l=Object(i.useCallback)((function(e){var t=a.clone().dayOfYear(+e.currentTarget.value);return n(t)}),[a,n]);return o.a.createElement("div",{className:"timeline-panel"},o.a.createElement("label",null,a.format("LL")),o.a.createElement("input",{className:"range",type:"range",value:a.dayOfYear(),step:1,min:null===r||void 0===r?void 0:r.dayOfYear(),max:null===c||void 0===c?void 0:c.dayOfYear(),onChange:l}))}));function Oe(){var e=Object(m.b)(),t=Object(m.c)(Y),a=Object(m.c)(x),r=Object(m.c)(re);return o.a.createElement("div",{className:me.a.sideBar},o.a.createElement("div",{className:me.a.header},o.a.createElement(fe,{label:"Confirmed",quantity:r.confirmed,activeColor:b[a],isActive:a===n.Comfirmed,onClick:function(){return e(L(n.Comfirmed))}}),o.a.createElement(fe,{label:"Recovered",quantity:r.recovered,activeColor:b[a],isActive:a===n.Recovered,onClick:function(){return e(L(n.Recovered))}}),o.a.createElement(fe,{label:"Deaths",quantity:r.deaths,activeColor:b[a],isActive:a===n.Deaths,onClick:function(){return e(L(n.Deaths))}}),o.a.createElement(fe,{label:"Active",quantity:r.active,activeColor:b[a],isActive:a===n.Active,onClick:function(){return e(L(n.Active))}})),o.a.createElement("div",{className:me.a.body},o.a.createElement(je,{date:g()(t),onChange:function(t){return e(F(t.format()))},minDate:g()("2020-01-22T00:00:00"),maxDate:g()()}),o.a.createElement(ye,null)))}a(185);var Ce=function(){var e=Object(m.b)();return Object(i.useEffect)((function(){e(U())}),[e]),o.a.createElement("div",{className:"App"},o.a.createElement(Oe,null),o.a.createElement(ue,null))},De=Object(j.a)({reducer:{countries:oe,map:E,sideBar:T},middleware:Object(j.d)()});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(m.a,{store:De},o.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,a){e.exports={sideBar:"SideBar_sideBar__3wXsx",header:"SideBar_header__1g25-",headerStat:"SideBar_headerStat__3YXJj",headerStatLabel:"SideBar_headerStatLabel__4KGyw",headerStatTotalQuantity:"SideBar_headerStatTotalQuantity__hZtn3",body:"SideBar_body__GaFHr"}},37:function(e,t,a){e.exports={tableContainer:"CountriesTable_tableContainer__HsFmS",headerCol:"CountriesTable_headerCol__2UGwN",headerRow:"CountriesTable_headerRow__9aWhl",evenRow:"CountriesTable_evenRow__24xvc",oddRow:"CountriesTable_oddRow__3SP1f"}},84:function(e,t,a){e.exports={mapContainer:"Map_mapContainer__dIyOX",tooltip:"Map_tooltip__2ttIR"}}},[[113,1,2]]]);
//# sourceMappingURL=main.214692b0.chunk.js.map